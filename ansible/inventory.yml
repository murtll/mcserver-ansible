prepare:
  vars:
    ansible_user: root
    new_user: automation
    new_user_group: automation
  children:
    swarm-manager:
    swarm-worker:

docker:
  vars:
    ansible_user: automation
  children:
    swarm-manager:
    swarm-worker:

webservers:
  children:
    traefik:

traefik:
  children:
    monitoring:

monitoring:
  children:
    website:

swarm-manager-init:
  hosts:
    node1.mcbrawl.ru:
      ansible_host: xx.yy.zz.vv
      advertise_addr: xx.yy.zz.vv

swarm-manager:
  children:
    swarm-manager-init:
  hosts:
    node2.mcbrawl.ru:
      ansible_host: xx.yy.zz.vv
      advertise_addr: xx.yy.zz.vv
    node3.mcbrawl.ru:
      ansible_host: xx.yy.zz.vv
      advertise_addr: xx.yy.zz.vv

swarm-worker:
  children:
    traefik:
    storage-volumes:
  hosts:
    node4.mcbrawl.ru:
      ansible_host: xx.yy.zz.vv
      advertise_addr: xx.yy.zz.vv
    node5.mcbrawl.ru:
      ansible_host: xx.yy.zz.vv
      advertise_addr: xx.yy.zz.vv

storage-volumes:
  vars:
    node_labels:
      volumes: true
      volume-type: nfs
  hosts:
    node6.mcbrawl.ru:
      ansible_host: xx.yy.zz.vv
      advertise_addr: xx.yy.zz.vv
    node7.mcbrawl.ru:
      ansible_host: xx.yy.zz.vv
      advertise_addr: xx.yy.zz.vv

website:
  vars:
    influxdb_retention: 1w
  hosts:
    mcbrawl.ru:
      influxdb_org: BrawlCraft
      influxdb_bucket: mcbrawl
      influxdb_user: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        31386631386130323435366463323231356433656136636161336366646636373933326430616439
        3232636435616330623735323435326261633266313435370a643632356366643963363431663531
        37636237626435646138376430313338396434356665306236363838623961376239356438613132
        3130343438306137370a636536616438366666656465333965303238346161363538646365623138
        6436
      influxdb_password: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        39653237623233643163633730653933313035343236316432303338366432336665616534386237
        3363313365353561316166323563333937616162363866630a343239366231373837363531343636
        35306531663062663335343037366136396362633631643430643465353631376433303361306664
        3666386665306538650a633338306337343265646137383637356464636136613135333663653666
        6361
      influxdb_token: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        64376238346638383463336230653337376632313562306431613638336463346539326231333232
        3835393662663435373565363463636332323730643932360a303436633236663839653830333637
        38663638613965393738336134663930393263363639313337336534636239396634316633303464
        6365616638353731660a323434663162353732366264336332353934323863626262353463333063
        64623134366230653965623736343665366133633566353266333339316164616165396265346336
        6366353533336466363463623063346338653133636537666433
      grafana_user: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        31306666323263346432363135356137333963663532323138643939313065326633613531383166
        3339383738343861323265333437373237346535376331340a376365333236326665363464393436
        33383739343461316334343735393363303461313537346663303661343137653436383766306262
        3032363236323163340a633265623738623566313730343637353735363932653333373532373064
        3232
      grafana_password: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        35336430633665393634383261326264363261313837663938393665383165643633653762303333
        3661346531633330333764383663663166323033343731650a616464356537393134303534333330
        64353165336536643063383134373665643939346638653535633662383731366337316562353832
        6463336165306631610a336337333562396539333264616362396533623962303364653631633265
        6261
      traefik_dashboard_host: traefik.mcbrawl.ru
      traefik_dashboard_basic_auth: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        63626665396461306632303231656637343162363634613332306530343533373532343039316165
        3339303439616633623436666130396637393138386264630a653261666536383962373837626630
        64343935646166323965383636396533636664633633656436653261343836373639616538333437
        3865323062396537610a376163323735623735646536336632636162316338386139613631376265
        66376138303365333136633739383139313134623965343030383263323564393936303733386638
        6335373263666632646638303732343361616664313638636334
      grafana_host: grafana.mcbrawl.ru
      ansible_host: 45.8.99.84